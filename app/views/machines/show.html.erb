<% title "Machine" %>

<p class="actions">
  <%= link_to 'Editer', edit_machine_path(@machine) %> |
  <%= link_to 'Supprimer', @machine, :confirm => 'Etes-vous sûr ?', :method => :delete %> |
  <%= link_to 'Retourner à la liste', machines_path %>
</p>

<div id="machine_general" class="column_wrapper">
<table class="show_item">
  <thead>
    <tr>
      <th colspan="2" style="font-size:14px;">
        <%= @machine.nom %>
        <% if @machine.virtuelle? %>
          <span class="virtual-machine">V</span>
        <% end %>
      </th>
    </tr>
  </thead>
  <%= show_for @machine do |s| %>
    <% if @machine.description.present? %>
    <tr class="wrapper machine_description">
      <td colspan="2">
        Description: <strong><%= @machine.description %></strong>
      </td>
    </tr>
    <% end %>
    <%= s.attribute :ip %>
    <!--<%= s.attribute :type_serveur %>-->
    <%= s.attribute :operating_system %>
    <%= s.attribute :service %>
    <%= s.attribute :theme %>
    <!--<%= s.attribute :ancien_nom %>-->
  <% end %>
  <% unless @machine.virtuelle? %>
  <thead>
    <tr><th colspan="2">Maintenance</th></tr>
  </thead>
  <%= show_for @machine do |s| %>
    <%= s.attribute :mainteneur %>
    <%= s.attribute :delivered_on %>
    <%= s.attribute :maintained_until %>
    <%= s.attribute :type_contrat %>
    <%= s.attribute :numero_serie %>
  <% end %>
  <% end %>
</table>
</div>

<div id="machine_hardware" class="column_wrapper">
<table class="show_item">
  <thead>
    <tr>
      <th colspan="2"><%= @machine.virtuelle? ? "Ressources" : "Matériel" %></th>
    </tr>
  </thead>
  <%= show_for @machine do |s| %>
    <%= s.attribute :localization unless @machine.virtuelle? %>
    <%= s.attribute :fullmodel unless @machine.virtuelle? %>
    <%= s.attribute :cpu %>
    <%= s.attribute :memoire %>
    <%= s.attribute :disks %>
    <%= s.attribute :media_drive unless @machine.virtuelle? %>
    <%= s.attribute :nb_rj45 %>
    <%= s.attribute :nb_fc %>
    <%= s.attribute :nb_iscsi %>
  <% end %>
</table>
</div>

<div id="machine_relations" class="column_wrapper">
<table class="show_item">
  <thead>
    <tr><th colspan="2">Applications liées</th></tr>
  </thead>
  <%= show_for @machine do |s| %>
    <tr class="wrapper machine_applications">
      <td colspan="2">
        <% if @machine.applications.any? %>
          <ul>
          <% @machine.applications.each do |application| %>
            <li><%= link_to application.nom, application %></li>
          <% end %>
          </ul>
        <% else %>
          <p>Aucune application liée.</p>
        <% end %>
      </td>
    </tr>
  <% end %>
</table>
</div>
